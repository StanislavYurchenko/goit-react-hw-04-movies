{"version":3,"sources":["views/NotFound/NotFound.js","views/MovieDetailsPage/no-img.jpg","views/MovieDetailsPage/MovieDetailsPage.js","services/themoviedbApi.js","../node_modules/is-image/index.js","../node_modules/path-browserify/index.js"],"names":["NotFound","pathToHomePage","routesMain","find","route","label","path","to","MovieDetailsPage","state","movie","error","loading","imagePath","noImage","componentDidMount","match","props","movieId","params","gethMovieDetailsById","then","res","setState","catch","console","log","componentDidUpdate","prevProps","prevState","prevMovie","BASE_URL_POSTER","poster_path","imgPath","isImage","onGoBack","history","location","from","push","pathToMoviePage","this","title","release_date","src","alt","width","routesDetailPage","map","url","type","onClick","fallback","Component","API_KEY","axios","defaults","baseURL","popularFetch","page","get","data","searchMoviesByKeyword","keyword","id","getCastsByMovieId","getUserReviewsAboutFilmById","require","imageExtensions","extensions","Set","module","exports","filePath","has","extname","slice","toLowerCase","normalizeArray","parts","allowAboveRoot","up","i","length","last","splice","unshift","filter","xs","f","resolve","resolvedPath","resolvedAbsolute","arguments","process","cwd","TypeError","charAt","split","p","join","normalize","isAbsolute","trailingSlash","substr","paths","Array","prototype","call","index","relative","trim","arr","start","end","fromParts","toParts","Math","min","samePartsLength","outputParts","concat","sep","delimiter","dirname","code","charCodeAt","hasRoot","matchedSlash","basename","ext","startDot","startPart","preDotState","str","len"],"mappings":"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","file":"static/js/MovieDetailsPage.1e466a33.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { routesMain } from '../../routes';\r\n\r\nfunction NotFound() {\r\n  const pathToHomePage = routesMain.find(route => route.label === 'HomePage').path;\r\n  return (\r\n    <section>\r\n      <h2> page not found </h2>\r\n      <p>\r\n        <Link to={pathToHomePage}>link</Link>\r\n        to main screen\r\n      </p>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default NotFound;\r\n","export default __webpack_public_path__ + \"static/media/no-img.3b57ad24.jpg\";","import React, { Component, Suspense } from 'react';\r\nimport { Link, Route, Switch } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport isImage from 'is-image';\r\nimport NotFound from '../../views/NotFound/NotFound';\r\nimport { routesMain, routesDetailPage } from '../../routes';\r\nimport {\r\n  gethMovieDetailsById,\r\n  BASE_URL_POSTER,\r\n} from '../../services/themoviedbApi';\r\nimport noImage from './no-img.jpg';\r\n\r\nclass MovieDetailsPage extends Component {\r\n  state = {\r\n    movie: null,\r\n    error: false,\r\n    loading: false,\r\n    imagePath: noImage,\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    const { match } = this.props;\r\n\r\n    if (match) {\r\n      const { movieId } = match.params;\r\n      gethMovieDetailsById(movieId)\r\n        .then(res => {\r\n          this.setState({ movie: res, error: false });\r\n        })\r\n        .catch(error => {\r\n          console.log('error', error);\r\n          this.setState({ error: true });\r\n        });\r\n    }\r\n  };\r\n\r\n  componentDidUpdate = (prevProps, prevState) => {\r\n    const prevMovie = prevState.movie;\r\n    const { movie, error } = this.state;\r\n\r\n    if (prevMovie !== movie && !error) {\r\n      const path = `${BASE_URL_POSTER}${movie.poster_path}`;\r\n      const imgPath = isImage(path) ? path : noImage;\r\n      this.setState({ imagePath: imgPath });\r\n    }\r\n  };\r\n\r\n  onGoBack = () => {\r\n    const {\r\n      history,\r\n      location: { state },\r\n    } = this.props;\r\n\r\n    if (state && state.from) {\r\n      history.push(state.from);\r\n      return;\r\n    }\r\n\r\n    const pathToMoviePage = routesMain.find(\r\n      route => route.label === 'MoviesPage',\r\n    ).path;\r\n    history.push(pathToMoviePage);\r\n  };\r\n\r\n  render() {\r\n    const { match } = this.props;\r\n    const { movie, error, imagePath } = this.state;\r\n\r\n    return movie && !error ? (\r\n      <section>\r\n        <h2> MovieDetailsPage</h2>\r\n        <h2>{movie.title}</h2>\r\n        <div>{movie.release_date}</div>\r\n        <img src={imagePath} alt={movie.title} width=\"150\" />\r\n        <br></br>\r\n        {routesDetailPage.map(route => (\r\n          <Link key={route.label} to={`${match.url}${route.path}`}>\r\n            {route.label}\r\n          </Link>\r\n        ))}\r\n        <br></br>\r\n        <button type=\"button\" onClick={this.onGoBack}>\r\n          Go back\r\n        </button>\r\n        <Suspense fallback={<div>Loading...</div>}>\r\n          <Switch>\r\n            {routesDetailPage.map(route => (\r\n              <Route\r\n                key={route.label}\r\n                {...route}\r\n                path={`${match.path}${route.path}`}\r\n              />\r\n            ))}\r\n          </Switch>\r\n        </Suspense>\r\n      </section>\r\n    ) : (\r\n      <NotFound />\r\n    );\r\n  }\r\n}\r\n\r\n// HOW TO DO THIS CORRECT??????????????\r\nMovieDetailsPage.propTypes = {\r\n  history: PropTypes.object.isRequired,\r\n  location: PropTypes.object.isRequired,\r\n  match: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default MovieDetailsPage;\r\n","import axios from 'axios';\r\n\r\nconst API_KEY = '1172fc2ae56a45677284ff05c420b54f';\r\nconst BASE_URL = 'https://api.themoviedb.org/3';\r\n\r\naxios.defaults.baseURL = BASE_URL;\r\n\r\nexport const BASE_URL_POSTER = 'https://image.tmdb.org/t/p/original';\r\n\r\nexport function popularFetch(page = 1) {\r\n  return axios\r\n    .get(`/trending/all/day?api_key=${API_KEY}&page=${page}`)\r\n    .then(res => res.data);\r\n}\r\n\r\nexport function searchMoviesByKeyword(keyword, page = 1) {\r\n  return axios\r\n    .get(\r\n      `/search/movie?api_key=${API_KEY}&language=en-US&query=${keyword}&page=${page}&include_adult=false`,\r\n    )\r\n    .then(res => res.data);\r\n}\r\n\r\nexport function gethMovieDetailsById(id) {\r\n  return axios\r\n    .get(\r\n      `https://api.themoviedb.org/3/movie/${id}?api_key=${API_KEY}&language=en-US`,\r\n    )\r\n    .then(res => res.data);\r\n}\r\n\r\nexport function getCastsByMovieId(id) {\r\n  return axios\r\n    .get(`/movie/${id}/credits?api_key=${API_KEY}&language=en-US`)\r\n    .then(res => res.data);\r\n}\r\n\r\nexport function getUserReviewsAboutFilmById(id, page = 1) {\r\n  return axios\r\n    .get(`/movie/${id}/reviews?api_key=${API_KEY}&language=en-US&page=${page}`)\r\n    .then(res => res.data);\r\n}\r\n","'use strict';\nconst path = require('path');\nconst imageExtensions = require('image-extensions');\n\nconst extensions = new Set(imageExtensions);\n\nmodule.exports = filePath => extensions.has(path.extname(filePath).slice(1).toLowerCase());\n","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n"],"sourceRoot":""}